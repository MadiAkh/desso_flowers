{% extends "base.html" %}
{% load static %}

{% block title %}–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞ ‚Äî D√âSSO FLOWERS{% endblock %}

{% block extra_css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'personal_account/css/checkout.css' %}">
{% endblock %}

{% block hero %}{% endblock %}
{% block stories %}{% endblock %}

{% block content %}
<section class="checkout-section">
  <div class="container">
    
    <h1 class="page-title">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>

    <form class="checkout-grid" id="checkoutForm">
      
      <div class="checkout-steps">
        
        <div class="step-card">
          <div class="step-header">
            <span class="step-number">01</span>
            <h2 class="step-title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h2>
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label>–í–∞—à–µ –∏–º—è</label>
              <input type="text" name="name" value="{{ user_info.name }}" placeholder="–ö–∞–∫ –∫ –≤–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è?" required>
            </div>
            <div class="form-group">
              <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
              <input type="tel" name="phone" value="{{ user_info.phone }}" placeholder="+7 (___) ___-__-__" required>
            </div>
            <div class="form-group full-width checkbox-group">
              <input type="checkbox" id="another_recipient">
              <label for="another_recipient">–ü–æ–ª—É—á–∞—Ç–µ–ª—å ‚Äî –¥—Ä—É–≥–æ–π —á–µ–ª–æ–≤–µ–∫</label>
            </div>
            
            <div class="recipient-fields hidden" id="recipientFields">
               <div class="form-grid inner">
                 <div class="form-group">
                   <label>–ò–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è</label>
                   <input type="text" name="recipient_name" placeholder="–ò–º—è">
                 </div>
                 <div class="form-group">
                   <label>–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è</label>
                   <input type="tel" name="recipient_phone" placeholder="+7 (___) ...">
                 </div>
               </div>
            </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-header">
            <span class="step-number">02</span>
            <h2 class="step-title">–î–æ—Å—Ç–∞–≤–∫–∞</h2>
          </div>
          
          <div class="delivery-tabs">
            <label class="tab-radio">
              <input type="radio" name="delivery_type" value="courier" checked>
              <span class="tab-box">–ö—É—Ä—å–µ—Ä–æ–º</span>
            </label>
            <label class="tab-radio">
              <input type="radio" name="delivery_type" value="pickup">
              <span class="tab-box">–°–∞–º–æ–≤—ã–≤–æ–∑</span>
            </label>
          </div>

          <div id="courierFields">
             <div class="form-grid">
               <div class="form-group full-width">
                 <label>–ì–æ—Ä–æ–¥</label>
                 <select name="city">
                   <option>–ê–ª–º–∞—Ç—ã</option>
                   <option>–ê—Å—Ç–∞–Ω–∞</option>
                 </select>
               </div>
               <div class="form-group full-width">
                 <label>–ê–¥—Ä–µ—Å</label>
                 <input type="text" name="address" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º">
               </div>
               <div class="form-group">
                 <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞ / –û—Ñ–∏—Å</label>
                 <input type="text" name="apt" placeholder="‚Ññ">
               </div>
               <div class="form-group">
                 <label>–ü–æ–¥—ä–µ–∑–¥ / –≠—Ç–∞–∂</label>
                 <input type="text" name="floor" placeholder="–ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ">
               </div>
             </div>
          </div>

          <div class="form-grid" style="margin-top: 20px;">
             <div class="form-group">
               <label>–î–∞—Ç–∞</label>
               <input type="date" name="date" required>
             </div>
             <div class="form-group">
               <label>–í—Ä–µ–º—è</label>
               <select name="time">
                 <option>–ö–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ</option>
                 <option>10:00 - 12:00</option>
                 <option>12:00 - 15:00</option>
                 <option>15:00 - 18:00</option>
                 <option>18:00 - 21:00</option>
               </select>
             </div>
             <div class="form-group full-width">
               <label>–¢–µ–∫—Å—Ç –æ—Ç–∫—Ä—ã—Ç–∫–∏ (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)</label>
               <textarea name="postcard" rows="2" placeholder="–ù–∞–ø–∏—à–µ–º –æ—Ç —Ä—É–∫–∏ –∫—Ä–∞—Å–∏–≤—ã–º –ø–æ—á–µ—Ä–∫–æ–º..."></textarea>
             </div>
          </div>
        </div>

        <div class="step-card">
          <div class="step-header">
            <span class="step-number">03</span>
            <h2 class="step-title">–û–ø–ª–∞—Ç–∞</h2>
          </div>
          
          <div class="payment-methods">
            <label class="payment-option">
              <input type="radio" name="payment" value="card">
              <div class="payment-box">
                <span class="icon">üí≥</span>
                <span class="name">–ö–∞—Ä—Ç–æ–π –æ–Ω–ª–∞–π–Ω</span>
              </div>
            </label>
            <label class="payment-option">
              <input type="radio" name="payment" value="cash">
              <div class="payment-box">
                <span class="icon">üíµ</span>
                <span class="name">–ù–∞–ª–∏—á–Ω—ã–º–∏</span>
              </div>
            </label>
          </div>
        </div>

      </div>

      <aside class="checkout-sidebar">
        <div class="order-summary sticky">
          <h3 class="summary-title">–í–∞—à –∑–∞–∫–∞–∑</h3>
          
          <div class="summary-items">
            {% for item in cart_items %}
              <div class="summary-item">
                <div class="item-info">
                  <div class="item-name">{{ item.name }}</div>
                  <div class="item-qty">{{ item.quantity }} —à—Ç.</div>
                </div>
                <div class="item-price">{{ item.price }} ‚Ç∏</div>
              </div>
            {% endfor %}
          </div>
          
          <hr class="summary-divider">
          
          <div class="summary-row">
            <span>–¢–æ–≤–∞—Ä—ã</span>
            <span>{{ subtotal }} ‚Ç∏</span>
          </div>
          <div class="summary-row">
            <span>–î–æ—Å—Ç–∞–≤–∫–∞</span>
            <span id="deliveryCost">{{ delivery_cost }} ‚Ç∏</span>
          </div>
          
          <div class="summary-total">
            <span>–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ</span>
            <span class="total-price">{{ total }} ‚Ç∏</span>
          </div>

          <button type="submit" class="btn-place-order">–û–ø–ª–∞—Ç–∏—Ç—å –∑–∞–∫–∞–∑</button>
          
          <p class="policy-text">
            –ù–∞–∂–∏–º–∞—è –∫–Ω–æ–ø–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å <a href="#">—É—Å–ª–æ–≤–∏—è–º–∏ –æ—Ñ–µ—Ä—Ç—ã</a>.
          </p>
        </div>
      </aside>

    </form>
  </div>
</section>

<script src="{% static 'personal_account/js/checkout.js' %}"></script>
{% endblock %}

{% block scripts %}
  <script src="{% static 'personal_account/js/checkout.js' %}"></script>
{% endblock %}